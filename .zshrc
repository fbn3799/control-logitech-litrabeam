function _hid() {
  # Get unique device paths
  device_paths=($( /usr/local/bin/hidapitester --vidpid 046D/B901 --list-detail | awk '/path:/ {print $2}' | sort -u ))

  # Iterate over each unique device path and execute all commands while it's open
  for path in "${device_paths[@]}"; do
    /usr/local/bin/hidapitester --open-path "$path" --length 20 --send-output $1 --send-output $2 --send-output $3
  done
}


# 2/17/22 Litra Glow aliases from https://github.com/kharyam/litra-driver/issues/13
function light() {
   _hid "0x11 0xff 0x04 0x1c 0x01"
}
function dark() {
   _hid "0x11 0xff 0x04 0x1c"
}
#
# ~10%
function glow(){
   _hid "0x11 0xff 0x04 0x4c 0x00 20"
}
# ~20%
function dim(){
   _hid "0x11 0xff 0x04 0x4c 0x00 50"
}
# ~40%
function normal() {
   _hid "0x11 0xff 0x04 0x4c 0x00 70"
}
# ~50%
function medium() {
   _hid "0x11 0xff 0x04 0x4c 0x00 100"
}
# 75%
function bright(){
   _hid "0x11 0xff 0x04 0x4c 0x00 180"
}
# 100%
function brightest(){
   _hid "0x11 0xff 0x04 0x4c 0x00 251"
}
#
# 2700K
function warmest() {
   _hid "0x11 0xff 0x04 0x9c 10 140"
}
# 3200K
function warm() {
   _hid "0x11 0xff 0x04 0x9c 12 128"
}
# 4400K
function neutral() {
   _hid "0x11 0xff 0x04 0x9c 17 48"
}
# 6500K
function coldest() {
   _hid "0x11 0xff 0x04 0x9c 25 100"
}
# 5500K
function sunlight() {
   return "0x11 0xff 0x04 0x9c 21 124"
}

function light_brightest_sunlight() {
  _hid "0x11 0xff 0x04 0x1c 0x01" "0x11 0xff 0x04 0x4c 0x00 255" "0x11 0xff 0x04 0x9c 21 124"
}

function light_brightest_neutral() {
  _hid "0x11 0xff 0x04 0x1c 0x01" "0x11 0xff 0x04 0x4c 0x00 255" "0x11 0xff 0x04 0x9c 17 48"
}

function light_warmest_dim() {
  _hid "0x11 0xff 0x04 0x1c 0x01" "0x11 0xff 0x04 0x9c 10 140" "0x11 0xff 0x04 0x4c 0x00 50"
}